{% extends 'base.html' %}

{% load static %}

{% block content %}

<div class="row no-gutters vh-100" style="background-color:rgb(233, 246, 247); overflow-y:hidden;">
<div class="col no-gutters">

<div class="row no-gutters ">
  <div class="col">
    <h4 class="ms-3 mt-4">{{project.name}}</h4>
  </div>
</div>

<div class="row no-gutters ">
  
  <!-- Document -->
  <div class="col-6">
    <div id="document">
      {% include 'projects/document.html' %}
    </div>
  </div>

  <!-- Instructions -->
  <div class="col-6">
    <div style="max-height: 90vh; overflow-x:hidden; overflow-y:scroll;">
      <div class="row no-gutters ">
        <div class="col-11 rounded">
          <!--<audio id="audioElement" controls></audio>-->
          {% for instruction in instructions %}
            <div class="row" id="instruction">
              {% include 'projects/instruction.html' %}
            </div>
          {% endfor %}
        </div>
      </div>
    </div>
  </div>

</div>

</div>
</div>

{% endblock %}

{% block javascript %}

<script>

  let mediaRecorder;
  let chunks = [];

  // Function to hide the dropdown when the user clicks outside of it
  document.addEventListener('click', function (event) {
    const dropdownContent = document.getElementById('actions');
    const toggleButton = document.querySelector('#actions_button');
    console.log(event.target)

    // Check if the clicked element is outside the dropdown and the toggle button
    if (!dropdownContent.contains(event.target) && event.target !== toggleButton) {
      // Send a request to hide the dropdown
      dropdownContent.innerHTML = '';
    }
  });
</script>

{% endblock %}